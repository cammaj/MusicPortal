{% extends "base.html" %}

{% block content %}
<div class="section-header">
  <div>
    <p class="eyebrow">Admin</p>
    <h2>Edit User: {{ user['username'] }}</h2>
  </div>
  <a class="pill" href="{{ url_for('admin_users') }}">Back</a>
</div>

<form method="post" enctype="multipart/form-data" class="glass form-card" style="max-width: 600px; margin: 0 auto;">
  <div style="text-align: center; margin-bottom: 2rem;">
    <div style="width: 120px; height: 120px; border-radius: 50%; background: rgba(255,255,255,0.1); margin: 0 auto 1rem; overflow: hidden; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(255,255,255,0.2);">
      {% if user['profile_image'] %}
        <img src="{{ url_for('static', filename='uploads/' + user['profile_image']) }}" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">
      {% else %}
        <span style="font-size: 3rem; color: rgba(255,255,255,0.3);">{{ user['username'][:1].upper() }}</span>
      {% endif %}
    </div>
  </div>

  <div class="form-grid" style="display: flex; flex-direction: column; gap: 1.5rem;">
    <label>Username
      <input type="text" name="username" value="{{ user['username'] }}" required>
    </label>

    <label>Email Address
      <input type="email" name="email" value="{{ user['email'] or '' }}">
    </label>

    <label>New Password
      <input type="password" name="password" placeholder="Enter new password">
    </label>
    
    <label>Role
      <select name="role">
        <option value="fan" {% if user['role'] == 'fan' %}selected{% endif %}>Fan</option>
        <option value="band" {% if user['role'] == 'band' %}selected{% endif %}>Band</option>
        <option value="admin" {% if user['role'] == 'admin' %}selected{% endif %}>Admin</option>
      </select>
    </label>

    <label>Profile Image
      <input type="file" name="profile_image" accept="image/*">
    </label>
  </div>

  <div style="margin-top: 2rem; text-align: right;">
    <button type="submit" class="button">Save Changes</button>
  </div>
</form>
{% endblock %}