{% extends 'base.html' %}
{% block content %}
<div class="section-header">
  <div>
    <p class="eyebrow">Band space</p>
    <h2>My Concert Listings</h2>
  </div>
  <a class="button" href="{{ url_for('create_concert') }}">+ New Concert</a>
</div>
<div class="card-grid">
  <div class="concert-card add-card">
    <p>Add a new concert</p>
    <a class="pill" href="{{ url_for('create_concert') }}">Create</a>
  </div>
  {% for concert in concerts %}
  <div class="concert-card {% if concert['image_filename'] %}has-image{% endif %}"
       {% if concert['image_filename'] %}
       style="background-image: linear-gradient(160deg, rgba(12,15,35,0.35), rgba(12,15,35,0.75)), url('{{ url_for('static', filename='uploads/' ~ concert['image_filename']) }}'); background-size: cover; background-position: center;"
       {% endif %}>
    <div class="concert-meta">
    </div>
    <h3>{{ concert['band_name'] }}</h3>
    <p class="muted">ğŸ“{{ concert['venue'] }}</p>
    <p class="date">ğŸ“… {{ concert['concert_datetime'].replace('T',' ') }}</p>
    <div class="card-footer" style="display:grid; grid-template-columns:auto 1fr auto; align-items:end; gap:.5rem;">
      <span class="pill soft">${{ concert['cost'] }}</span>
      <span></span>
      <span class="pill" style="text-transform:capitalize; justify-self:end;">{{ concert['status'] }}</span>
    </div>
    <a class="button ghost" href="{{ url_for('edit_concert', concert_id=concert['id']) }}">Edit</a>
  </div>
  {% endfor %}
</div>
{% if not concerts %}
  <div class="empty">You have no concerts! Add a new one.</div>
{% endif %}
{% endblock %}
